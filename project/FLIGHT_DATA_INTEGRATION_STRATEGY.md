# VoyPath Flight Data Integration & Affiliate Strategy

## ğŸ“± ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ¦‚è¦

### VoyPath - AIæ—…è¡Œãƒ—ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 
VoyPathã¯ã€AIã‚’æ´»ç”¨ã—ãŸæ¬¡ä¸–ä»£ã®æ—…è¡Œãƒ—ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¤‡æ•°ã®ç›®çš„åœ°ã‚’å«ã‚€è¤‡é›‘ãªæ—…è¡Œè¨ˆç”»ã‚’åŠ¹ç‡çš„ã«ä½œæˆãƒ»æœ€é©åŒ–ã§ãã‚‹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚

### ä¸»è¦æ©Ÿèƒ½
1. **ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒãƒƒãƒ—è¡¨ç¤º**
   - Google Mapsçµ±åˆã«ã‚ˆã‚‹ç›´æ„Ÿçš„ãªå ´æ‰€é¸æŠ
   - ãƒ«ãƒ¼ãƒˆå¯è¦–åŒ–ã¨è·é›¢è¨ˆç®—
   - è¤‡æ•°æ—¥ç¨‹ã®ç®¡ç†

2. **AIæ—…è¡Œæœ€é©åŒ–**
   - Supabase Edge Functionsã«ã‚ˆã‚‹ãƒ«ãƒ¼ãƒˆæœ€é©åŒ–
   - ç§»å‹•æ™‚é–“ãƒ»ã‚³ã‚¹ãƒˆãƒ»ä½“é¨“ä¾¡å€¤ã®ç·åˆæœ€é©åŒ–
   - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ã®æ—…ç¨‹èª¿æ•´

3. **è©³ç´°ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç®¡ç†**
   - æ—¥æ¯ã®è©³ç´°è¡Œç¨‹ä½œæˆ
   - æ™‚é–“ç®¡ç†ã¨äºˆç®—è¿½è·¡
   - ã‚°ãƒ«ãƒ¼ãƒ—æ—…è¡Œå¯¾å¿œ

4. **ãƒ•ãƒ©ã‚¤ãƒˆæ¤œç´¢ãƒ»äºˆç´„ã‚·ã‚¹ãƒ†ãƒ ** â­ **åç›ŠåŒ–ã®æ ¸å¿ƒ**
   - ç©ºæ¸¯é–“ãƒ«ãƒ¼ãƒˆè‡ªå‹•æ¤œå‡º
   - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ•ãƒ©ã‚¤ãƒˆæƒ…å ±
   - ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆã«ã‚ˆã‚‹äºˆç´„èª˜å°

## ğŸ’° ç¾åœ¨ã®ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆæˆ¦ç•¥

### å®Ÿè£…æ¸ˆã¿ï¼šTravelPayouts + Trip.com
```
ãƒ•ãƒ©ã‚¤ãƒˆæ¤œç´¢ â†’ ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º â†’ TravelPayoutsã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆãƒªãƒ³ã‚¯ â†’ Trip.comæ¤œç´¢ãƒšãƒ¼ã‚¸
```

**ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆè¨­å®š:**
- **Provider:** TravelPayouts
- **Marker:** 649297
- **Target:** Trip.com (Partner ID: 8626)
- **Campaign ID:** 121

**ç¾åœ¨ã®èª²é¡Œ:**
- å®Ÿéš›ã®ãƒ•ãƒ©ã‚¤ãƒˆãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œãªã„ï¼ˆãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã®ã¿ï¼‰
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹ã®é™ç•Œ

## ğŸš€ ç†æƒ³çš„ãªå®Ÿè£…ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

### 1. ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ•ãƒ©ã‚¤ãƒˆãƒ‡ãƒ¼ã‚¿çµ±åˆ

#### å„ªå…ˆåº¦1: TravelPayouts Flight Search API
```javascript
// ç†æƒ³çš„ãªAPIã‚¯ã‚¨ãƒª
const flightSearchQuery = {
  endpoint: 'https://api.travelpayouts.com/v1/prices/direct',
  parameters: {
    origin: 'NRT',        // å‡ºç™ºç©ºæ¸¯IATA
    destination: 'LAX',   // åˆ°ç€ç©ºæ¸¯IATA
    depart_date: '2025-09-07',
    return_date: '',      // ç‰‡é“ã®å ´åˆã¯ç©º
    currency: 'JPY',
    token: 'API_KEY'
  }
}
```

#### æœŸå¾…ã•ã‚Œã‚‹ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ§‹é€ 
```json
{
  "success": true,
  "data": {
    "NRT_LAX_2025-09-07": {
      "origin": "NRT",
      "destination": "LAX", 
      "depart_date": "2025-09-07",
      "return_date": "",
      "price": 85000,
      "airline": "NH",
      "flight_number": 5,
      "transfers": 0,
      "duration": 540,
      "currency": "JPY",
      "actual": true,
      "distance": 8815,
      "gate": "A7"
    }
  },
  "currency": "JPY"
}
```

#### ãƒ‡ãƒ¼ã‚¿å¤‰æ›ãƒ»è¡¨ç¤ºãƒ•ãƒ­ãƒ¼
```typescript
interface FlightOption {
  airline: string;          // 'ANA', 'JAL', 'United'
  flightNumber: string;     // 'NH5', 'JL61'
  departure: string;        // '14:30'
  arrival: string;          // '08:45'
  duration: string;         // '9h 15m'
  price: number;           // 85000
  currency: string;        // 'JPY'
  bookingUrl: string;      // ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆãƒªãƒ³ã‚¯
  transfers: number;       // 0 = ç›´è¡Œä¾¿
  aircraft: string;        // 'Boeing 787'
  gates?: string;          // 'A7 â†’ T2'
  matchesSchedule?: boolean; // æ—¢å­˜æ—…ç¨‹ã¨ã®é©åˆæ€§
}
```

### 2. é«˜åº¦ãªãƒ•ãƒ©ã‚¤ãƒˆæ¤œç´¢æ©Ÿèƒ½

#### è¤‡æ•°æ—¥ç¨‹å¯¾å¿œ
```javascript
// VoyPathã®å¼·ã¿ï¼šè¤‡æ•°éƒ½å¸‚é–“ã®é€£ç¶šãƒ•ãƒ©ã‚¤ãƒˆæ¤œç´¢
const multiCitySearch = {
  segments: [
    { from: 'NRT', to: 'LAX', date: '2025-09-07' },
    { from: 'LAX', to: 'JFK', date: '2025-09-10' },  
    { from: 'JFK', to: 'NRT', date: '2025-09-14' }
  ],
  passengers: {
    adults: 2,
    children: 0,
    infants: 0
  },
  preferences: {
    class: 'economy',
    maxStops: 1,
    preferredAirlines: ['NH', 'JL', 'UA']
  }
}
```

#### æ™‚é–“ãƒ»äºˆç®—æœ€é©åŒ–
```javascript
// AIæœ€é©åŒ–ã¨ã®é€£æº
const optimizedFlightSearch = {
  existingItinerary: {
    departureTime: '14:30',  // æ—¢å­˜è¨ˆç”»ã®å‡ºç™ºæ™‚åˆ»
    arrivalTime: '08:45',    // æ—¢å­˜è¨ˆç”»ã®åˆ°ç€æ™‚åˆ»
    maxBudget: 100000,       // äºˆç®—ä¸Šé™
    flexibility: 'medium'    // æ™‚é–“ã®æŸ”è»Ÿæ€§
  },
  optimization: {
    prioritize: 'cost',      // 'cost' | 'time' | 'comfort'
    allowOvernight: false,
    preferNonstop: true
  }
}
```

## ğŸ”— ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆåç›ŠåŒ–è©³ç´°

### ç¾åœ¨ã®åç›Šãƒ¢ãƒ‡ãƒ«

#### TravelPayoutså§”å“¡ä¼šæ§‹é€ 
```
åŸºæœ¬ã‚³ãƒŸãƒƒã‚·ãƒ§ãƒ³: è³¼å…¥é¡ã® 0.5-2.0%
- å›½å†…ç·š: ~0.5%
- å›½éš›ç·š: ~1.0-2.0%  
- ãƒ—ãƒ¬ãƒŸã‚¢ãƒ è·¯ç·š: ~2.0-4.0%

åç›Šä¾‹ï¼ˆæœˆé–“ï¼‰:
- 100ä»¶ã®ãƒ•ãƒ©ã‚¤ãƒˆäºˆç´„
- å¹³å‡äºˆç´„é¡: Â¥80,000
- å¹³å‡ã‚³ãƒŸãƒƒã‚·ãƒ§ãƒ³: 1.2%
- æœˆé–“åç›Š: Â¥96,000
```

#### Trip.comç‰¹åŒ–ã®ãƒ¡ãƒªãƒƒãƒˆ
```
é«˜ã„ã‚³ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç‡:
- ã‚¢ã‚¸ã‚¢è·¯ç·šã«å¼·ã„
- æ—¥æœ¬èªå¯¾å¿œå®Œå…¨
- ç«¶äº‰åŠ›ã®ã‚ã‚‹ä¾¡æ ¼
- ãƒ¢ãƒã‚¤ãƒ«æœ€é©åŒ–

è¿½åŠ åç›Šæ©Ÿä¼š:
- ãƒ›ãƒ†ãƒ«äºˆç´„: 2-8%
- ãƒ¬ãƒ³ã‚¿ã‚«ãƒ¼: 3-6%
- ç¾åœ°ãƒ„ã‚¢ãƒ¼: 5-15%
- æ—…è¡Œä¿é™º: 10-25%
```

### ç†æƒ³çš„ãªåç›Šæœ€å¤§åŒ–æˆ¦ç•¥

#### 1. è¤‡æ•°ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼çµ±åˆ
```javascript
const affiliateProviders = [
  {
    name: 'TravelPayouts',
    strength: 'ä¸–ç•Œçš„ã‚«ãƒãƒ¬ãƒƒã‚¸',
    commission: '0.5-2.0%',
    priority: 1
  },
  {
    name: 'Skyscanner',
    strength: 'æ¯”è¼ƒæ¤œç´¢',
    commission: 'CPC Â¥50-200',
    priority: 2
  },
  {
    name: 'Expedia',
    strength: 'ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸',
    commission: '2-6%',
    priority: 3
  }
]
```

#### 2. å‹•çš„ãƒ—ãƒ©ã‚¤ã‚·ãƒ³ã‚°
```javascript
// æœ€é©ãªãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼è‡ªå‹•é¸æŠ
const selectBestProvider = (searchParams) => {
  const factors = {
    route: searchParams.route,
    price: searchParams.budget,
    userProfile: searchParams.user,
    seasonality: getCurrentSeason(),
    competition: getMarketData()
  };
  
  return calculateOptimalProvider(factors);
};
```

## ğŸ“Š æŠ€è¡“å®Ÿè£…ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

### Phase 1: åŸºç›¤å¼·åŒ–ï¼ˆ2é€±é–“ï¼‰
- [ ] **Vercel API Proxyä¿®æ­£**
  - Next.jsãƒ™ãƒ¼ã‚¹ã®å®‰å®šã—ãŸAPI routeå®Ÿè£…
  - CORSå•é¡Œã®å®Œå…¨è§£æ±º
  - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–

- [ ] **TravelPayoutsçµ±åˆå®Œæˆ**
  ```typescript
  // ç›®æ¨™å®Ÿè£…
  class EnhancedTravelPayoutsService {
    async searchFlights(params: FlightSearchParams): Promise<FlightOption[]>
    async getFlightDetails(flightId: string): Promise<FlightDetails>
    async trackBooking(bookingData: BookingTrackingData): Promise<void>
  }
  ```

- [ ] **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿è¡¨ç¤º**
  - ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰å®Ÿãƒ‡ãƒ¼ã‚¿ã¸ã®å®Œå…¨ç§»è¡Œ
  - ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥å®Ÿè£…ï¼ˆRedis/Supabaseï¼‰
  - ãƒ¬ãƒ¼ãƒˆåˆ¶é™å¯¾å¿œ

### Phase 2: æ©Ÿèƒ½æ‹¡å¼µï¼ˆ4é€±é–“ï¼‰
- [ ] **è¤‡æ•°ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å¯¾å¿œ**
  ```typescript
  interface FlightProvider {
    search(params: SearchParams): Promise<FlightOption[]>
    getBookingUrl(flight: FlightOption): string
    trackCommission(booking: BookingData): void
  }
  
  class AggregatedFlightService {
    providers: FlightProvider[]
    async searchAll(params: SearchParams): Promise<FlightOption[]>
    async findBestDeal(results: FlightOption[]): Promise<FlightOption>
  }
  ```

- [ ] **AIæ¨å¥¨ã‚·ã‚¹ãƒ†ãƒ **
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼å—œå¥½å­¦ç¿’
  - äºˆç®—æœ€é©åŒ–ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
  - ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³

- [ ] **äºˆç´„è¿½è·¡ã‚·ã‚¹ãƒ†ãƒ **
  ```javascript
  // åç›Šåˆ†æãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
  const revenueAnalytics = {
    clickTracking: 'PostHog/Google Analytics',
    conversionTracking: 'Affiliate API callbacks',
    revenueAttribution: 'Advanced tracking pixels',
    userJourneyAnalysis: 'Heatmaps + session recordings'
  }
  ```

### Phase 3: æœ€é©åŒ–ãƒ»æ‹¡å¼µï¼ˆ8é€±é–“ï¼‰
- [ ] **åç›Šæœ€å¤§åŒ–**
  - å‹•çš„ãƒ—ãƒ©ã‚¤ã‚·ãƒ³ã‚°
  - A/Bãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
  - ã‚³ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³æœ€é©åŒ–

- [ ] **å›½éš›å±•é–‹**
  - å¤šè¨€èªå¯¾å¿œ
  - åœ°åŸŸç‰¹åŒ–ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼
  - ç¾åœ°é€šè²¨å¯¾å¿œ

- [ ] **ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºæ©Ÿèƒ½**
  - æ³•äººå‘ã‘ãƒ—ãƒ©ãƒ³
  - å›£ä½“æ—…è¡Œæœ€é©åŒ–
  - ã‚«ã‚¹ã‚¿ãƒ ãƒ–ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°

## ğŸ¯ æˆåŠŸæŒ‡æ¨™ãƒ»KPI

### æŠ€è¡“æŒ‡æ¨™
```
APIå¿œç­”æ™‚é–“: <2ç§’
ãƒ‡ãƒ¼ã‚¿æ­£ç¢ºæ€§: >95%
ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒç‡: >99.5%
æ¤œç´¢æˆåŠŸç‡: >98%
```

### ãƒ“ã‚¸ãƒã‚¹æŒ‡æ¨™
```
æœˆé–“ãƒ•ãƒ©ã‚¤ãƒˆæ¤œç´¢: ç›®æ¨™ 10,000ä»¶
æ¤œç´¢â†’ã‚¯ãƒªãƒƒã‚¯ç‡: ç›®æ¨™ 15%
ã‚¯ãƒªãƒƒã‚¯â†’äºˆç´„ç‡: ç›®æ¨™ 3%
æœˆé–“äºˆç´„ä»¶æ•°: ç›®æ¨™ 45ä»¶
å¹³å‡äºˆç´„é¡: Â¥75,000
æœˆé–“åç›Š: ç›®æ¨™ Â¥40,000+
```

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹
```
ãƒ•ãƒ©ã‚¤ãƒˆæ¤œç´¢æº€è¶³åº¦: >4.5/5
äºˆç´„å®Œäº†ç‡: >85%
ãƒªãƒ”ãƒ¼ãƒˆåˆ©ç”¨ç‡: >60%
ã‚¢ãƒ—ãƒªã‚¹ãƒˆã‚¢è©•ä¾¡: >4.3/5
```

## ğŸ’¡ é©æ–°çš„åç›ŠåŒ–ã‚¢ã‚¤ãƒ‡ã‚¢

### 1. AIæ—…è¡Œã‚³ãƒ³ã‚·ã‚§ãƒ«ã‚¸ãƒ¥
```javascript
// ãƒ—ãƒ¬ãƒŸã‚¢ãƒ æ©Ÿèƒ½ã¨ã—ã¦ã®åç›ŠåŒ–
const aiConcierge = {
  personalizedRecommendations: 'æœˆé¡ Â¥980',
  realTimeRebooking: 'Â¥500/å›',
  prioritySupport: 'å¹´é¡ Â¥5,980',
  exclusiveDeals: 'ã‚³ãƒŸãƒƒã‚·ãƒ§ãƒ³ +2%'
}
```

### 2. æ—…è¡Œä¿é™ºçµ±åˆ
```javascript
// é«˜ã‚³ãƒŸãƒƒã‚·ãƒ§ãƒ³å•†å“
const travelInsurance = {
  commission: '15-25%',
  averagePolicy: 'Â¥8,000',
  conversionRate: '20%',
  monthlyRevenue: 'Â¥24,000+'
}
```

### 3. æ³•äººå‘ã‘ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³
```javascript
// B2Båç›Šãƒ¢ãƒ‡ãƒ«
const enterprisePlan = {
  setupFee: 'Â¥50,000',
  monthlyFee: 'Â¥10,000',
  transactionFee: '2%',
  customIntegration: 'Â¥200,000+'
}
```

## ğŸ”® å°†æ¥ã®ãƒ“ã‚¸ãƒ§ãƒ³

### çŸ­æœŸç›®æ¨™ï¼ˆ3ãƒ¶æœˆï¼‰
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ•ãƒ©ã‚¤ãƒˆãƒ‡ãƒ¼ã‚¿å®Œå…¨çµ±åˆ
- æœˆé–“åç›Š Â¥50,000é”æˆ
- ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦ 4.5/5é”æˆ

### ä¸­æœŸç›®æ¨™ï¼ˆ6ãƒ¶æœˆï¼‰
- è¤‡æ•°ã‚¢ãƒ•ã‚£ãƒªã‚¨ã‚¤ãƒˆçµ±åˆå®Œäº†
- AIæ¨å¥¨ã‚·ã‚¹ãƒ†ãƒ ç¨¼åƒ
- æœˆé–“åç›Š Â¥150,000é”æˆ

### é•·æœŸç›®æ¨™ï¼ˆ12ãƒ¶æœˆï¼‰
- ã‚¢ã‚¸ã‚¢å¤ªå¹³æ´‹åœ°åŸŸã§ã®èªçŸ¥åº¦ç¢ºç«‹
- ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºé¡§å®¢ç²å¾—é–‹å§‹
- æœˆé–“åç›Š Â¥500,000é”æˆ

---

**æœ€çµ‚æ›´æ–°:** 2025-07-07  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:** Phase 1å®Ÿè£…æº–å‚™ä¸­  
**æ¬¡å›ãƒ¬ãƒ“ãƒ¥ãƒ¼:** å®Ÿãƒ‡ãƒ¼ã‚¿çµ±åˆå®Œäº†å¾Œ