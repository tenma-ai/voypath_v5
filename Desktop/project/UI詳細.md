# Voypath アプリケーション UI 詳細ドキュメント

## 目次
1. [概要](#概要)
2. [デザインシステム](#デザインシステム)
3. [共通コンポーネント](#共通コンポーネント)
4. [画面フロー](#画面フロー)
5. [各画面詳細](#各画面詳細)
6. [レスポンシブ対応](#レスポンシブ対応)
7. [アクセシビリティ](#アクセシビリティ)

## 概要

Voypathはグループ旅行計画最適化アプリケーションです。ユーザーは旅行計画を作成し、メンバーを招待し、訪問したい場所を追加し、最適な経路を生成することができます。

### 主要機能
- トリップ作成・管理
- メンバー招待・管理
- 訪問場所の追加・管理
- 経路最適化
- グループチャット
- 旅程の共有

## デザインシステム

### カラーパレット
- **プライマリカラー**: スカイブルー (#0ea5e9)
- **セカンダリカラー**: ネイビーブルー (dark: #1e3a8a)
- **アクセントカラー**: レッド (#ef4444) - 削除などの破壊的操作に使用
- **背景色**: 
  - ライトモード: 白 (#ffffff)
  - ダークモード: 濃いグレー (#020617)
- **テキスト色**:
  - ライトモード: 濃いグレー (#0f172a)
  - ダークモード: 薄いグレー (#f8fafc)
- **ミュートテキスト**:
  - ライトモード: グレー (#64748b)
  - ダークモード: 薄いグレー (#94a3b8)

### タイポグラフィ
- **フォントファミリー**: Inter
- **サイズ**:
  - 見出し (h1): 24px (1.5rem)
  - 見出し (h2): 20px (1.25rem)
  - 見出し (h3): 18px (1.125rem)
  - 本文: 16px (1rem)
  - 小テキスト: 14px (0.875rem)
  - 極小テキスト: 12px (0.75rem)

### アイコン
- **アイコンセット**: Lucide Icons
- **サイズ**:
  - 大: 24px
  - 中: 20px
  - 小: 16px

### スペーシング
- **基本単位**: 4px
- **コンテンツパディング**: 16px

### シャドウ
- **カード**: 0 1px 3px rgba(0,0,0,0.1)
- **モーダル**: 0 10px 15px -3px rgba(0,0,0,0.1)
- **ドロップダウン**: 0 4px 6px -1px rgba(0,0,0,0.1)

### 角丸
- **カード**: 8px
- **ボタン**: 6px
- **入力フィールド**: 6px
- **チップ/タグ**: 9999px (完全な丸)

## 共通コンポーネント

### ナビゲーション

#### トップアプリバー
- **高さ**: 56px
- **背景色**: 白 (ダークモード: 暗いグレー)
- **内容**:
  - 左側: アプリロゴ/名前
  - 中央: 現在のページタイトル
  - 右側: テーマ切り替え、ユーザープロフィールアクション

#### ボトムナビゲーションバー
- **高さ**: 64px
- **背景色**: 白 (ダークモード: 暗いグレー)
- **タブアイテム**:
  - ホーム: ホームアイコン
  - 計画: マップアイコン
  - マイプレイス: ピンアイコン
  - チャット: メッセージアイコン
  - 共有: シェアアイコン
- **アクティブ状態**: アイコンがスカイブルー (#0ea5e9) で塗りつぶし

### ボタン

#### プライマリボタン
- **背景色**: スカイブルー (#0ea5e9)
- **テキスト色**: 白
- **パディング**: 8px 16px
- **高さ**: 40px (sm: 32px)
- **ホバー**: 濃いスカイブルー (#0284c7)

#### セカンダリボタン (アウトライン)
- **境界線**: 1px 灰色
- **テキスト色**: 現在のテキスト色
- **背景色**: 透明
- **パディング**: 8px 16px
- **高さ**: 40px (sm: 32px)
- **ホバー**: 薄いグレー背景

#### デンジャーボタン
- **背景色**: レッド (#ef4444)
- **テキスト色**: 白
- **パディング**: 8px 16px
- **高さ**: 40px
- **ホバー**: 濃いレッド (#dc2626)

#### アイコンボタン
- **サイズ**: 40px x 40px (sm: 32px x 32px)
- **形状**: 円形または正方形
- **コンテンツ**: アイコンのみ

### カード
- **背景色**: 白 (ダークモード: 暗いグレー)
- **境界線**: 1px 薄いグレー
- **パディング**: 16px
- **角丸**: 8px
- **ホバー効果**: 境界線色がスカイブルーに変化

### 入力フィールド
- **高さ**: 40px
- **パディング**: 8px 12px
- **境界線**: 1px 薄いグレー
- **フォーカス**: スカイブルー境界線
- **背景**: 白 (ダークモード: 暗いグレー)
- **ラベル**: 上部配置、12px

### アラート
- **パディング**: 16px
- **角丸**: 6px
- **情報**: 青背景
- **成功**: 緑背景
- **警告**: 黄色背景
- **エラー**: 赤背景

### ローディング状態
- **スピナー**: スカイブルー、アニメーション
- **スケルトン**: 薄いグレー、パルスアニメーション

## 画面フロー

### 初回訪問フロー
1. ホーム画面表示
2. ゲストプロフィールプロンプト表示
3. ユーザー情報入力
4. トリップ一覧表示

### トリップ作成フロー
1. ホーム画面で「Create Trip」ボタンをタップ
2. トリップ作成フォーム表示
3. 情報入力（名前、出発地、日程など）
4. 作成完了後、トリップ詳細画面に遷移

### トリップ参加フロー
1. ホーム画面で「Join Trip」ボタンをタップ
2. 参加コード入力画面表示
3. コード入力後、参加確認
4. 参加成功後、該当トリップの詳細画面に遷移

### 場所追加フロー
1. マイプレイスタブ選択
2. 「Add Place」ボタンをタップ
3. 場所検索画面表示
4. 場所検索、選択
5. 詳細情報入力（訪問希望度、滞在時間など）
6. 追加完了、マイプレイス一覧に戻る

### 経路最適化フロー
1. プランタブ選択
2. 最適化設定（日数、開始・終了時間など）
3. 最適化実行
4. 結果表示（地図上のルート、タイムライン）

## 各画面詳細

### 1. ホーム画面 (/)
#### レイアウト
- トップ: ゲストプロフィールプロンプト（未設定時のみ）
- メイン: トリップ一覧
- ヘッダー: 「My Trips」タイトル
- アクション: 「Join Trip」ボタン、「Create Trip」ボタン

#### コンポーネント
- **ゲストプロフィールプロンプト**:
  - 未設定時のみ表示
  - ユーザー名入力促進カード
  - 名前入力フィールド
  - 保存ボタン（スカイブルー背景）
  - スキップリンク（下部にグレーテキスト）
- **トリップカード**:
  - トリップ名（太字、18px）
  - 説明文（グレーテキスト、最大2行表示、オーバーフロー省略）
  - 出発地（MapPinアイコン付き）
  - 日程（Calendarアイコン付き、日付範囲表示）
  - メンバー数（Usersアイコン付き、「X members」形式）
  - 作成日時（「Created X ago」形式）
  - 右上: 編集ボタン（Editアイコン）、削除ボタン（Trashアイコン）
  - ホバー/タップ状態: 枠線がスカイブルーに変化

#### インタラクション
- トリップカードタップ: 該当トリップの詳細画面に遷移
- 編集ボタン: 該当トリップの編集画面に遷移
- 削除ボタン: 削除確認ダイアログ表示
  - ダイアログ: タイトル、警告文、キャンセル/削除ボタン
  - 削除確認後: トーストメッセージ表示、リストから削除
- 「Create Trip」ボタン: 新規トリップ作成画面に遷移
- 「Join Trip」ボタン: トリップ参加画面に遷移

### 2. トリップ詳細画面 (/my-trip)
#### レイアウト
- トップ: トリップ情報ヘッダー
- タブコントロール: 「Map」と「List」の切り替え
- メインコンテンツエリア: 選択されたビューを表示
- 下部: フローティングアクションボタン（最適化ボタン）

#### コンポーネント
- **トリップ情報ヘッダー**:
  - トリップ名（24px、太字）
  - 説明（グレーテキスト、複数行可）
  - メタ情報バー:
    - 出発地（MapPinアイコン）
    - 日程（Calendarアイコン、開始-終了日）
    - メンバー数（Usersアイコン、「X members」）
  - 右上: 編集ボタン
  - 設定ボタン（SettingsIconアイコン）- トリップ設定モーダル表示用

- **タブコントロール**:
  - Map/Listタブ（上部または中央配置）
  - アクティブタブ: 下部ボーダーラインとテキスト色がスカイブルー
  - 非アクティブタブ: グレーテキスト
  
- **マップビュー**:
  - Google Maps埋め込み（フル幅、高さ自動調整）
  - 場所マーカー:
    - 色分け（カテゴリー別）
    - 番号付き（スケジュール順）
    - サイズ変化（重要度に応じて）
  - ルートライン:
    - 最適化済みの場合、マーカー間を線で接続
    - 移動手段によって線のスタイル変更:
      - 徒歩: 点線（青）
      - 公共交通機関: 実線（色分け、路線ごと）
      - 車/タクシー: 実線（青）
    - 異なる日のルートは異なる色で表示
    - ホバー時に移動時間と距離をポップアップ表示
  - コントロール:
    - ズーム +/- ボタン
    - 現在地表示ボタン
    - レイヤー切り替えボタン（交通機関、観光地、レストランなど）
  - 情報ウィンドウ:
    - マーカークリック時に表示
    - 場所名、評価、訪問時間、簡易アクション
    - 「詳細表示」ボタン
    - 「経路表示」ボタン
  - 日付フィルター:
    - 上部に日付チップ（横スクロール可能）
    - 選択日付のルートとマーカーのみ表示
    - 「全日程表示」オプション

- **リストビュー**:
  - 日付セレクター（上部スクロール可能）:
    - 各日付をカード形式で表示
    - 選択中の日付: 枠線と背景色が変化
    - 日付と曜日表示（例: 「5月15日（月）」）
  - デイリーサマリーカード（日付下）:
    - 総訪問場所数（例: 「5ヶ所訪問」）
    - 総移動時間（例: 「移動合計: 1時間30分」）
    - 総移動距離（例: 「合計: 8.5km」）
    - 天気予報アイコン（APIから取得時）
  - タイムライン表示:
    - 縦方向のタイムライン（左側に時間軸表示、1時間単位目盛り）
    - 始点と終点:
      - 朝: ホテル/宿泊地アイコン（出発時間表示）
      - 夜: ホテル/宿泊地アイコン（到着時間表示）
    - 場所ボックス（右側に配置）:
      - 背景色: カテゴリー別の薄い色付け
      - 場所名（太字、16px）
      - 時間範囲（例: 「10:00-11:30」）
      - 滞在時間（例: 「滞在: 1時間30分」）
      - カテゴリーアイコン（右上）
      - 訪問希望度（星評価、1-5）
      - サムネイル画像（存在する場合、左側）
      - 右矢印アイコン（詳細表示用）
    - 接続線:
      - 場所ボックス間を垂直線で接続（実線、1px）
      - 線の左側に移動手段アイコン表示:
        - 徒歩: 人型アイコン（👣）
        - 公共交通機関: 電車/バスアイコン（🚆/🚌）
        - タクシー: タクシーアイコン（🚕）
        - 車: 車アイコン（🚗）
        - 自転車: 自転車アイコン（🚲）
      - 移動時間テキスト（例: 「15分」）
      - 距離表示（例: 「1.2km」）
      - 移動経路の概要（例: 「JR山手線→東京メトロ」）
      - タップ可能領域（タップで移動詳細表示）
    - 特別項目:
      - 食事時間（🍽️アイコン付き、薄いオレンジ背景）
      - 休憩時間（☕アイコン付き、薄い緑背景）
      - 自由時間（⏱️アイコン付き、薄い青背景）
      - ドラッグ可能（長押しで並べ替え可能、管理者権限時）

- **場所詳細モーダル**:
  - ヘッダー: 場所画像（全幅、アスペクト比16:9）
  - 閉じるボタン（右上X）
  - タブコントロール: 「詳細」「レビュー」「写真」
  - 詳細タブ:
    - 場所名（24px、太字）
    - カテゴリ（アイコン付き）
    - 住所（コピーボタン付き）
    - Google Maps連携ボタン（「外部マップで開く」）
    - 訪問希望度（大きめの星表示、編集可能）
    - 予定訪問時間（カレンダーアイコン、日時表示）
    - 滞在予定時間（時計アイコン、時間表示、編集可能）
    - 予算/価格帯（$, $$, $$$表示）
    - メモテキスト（複数行表示可能、編集可能）
    - 営業時間情報（API取得時、折りたたみ可能）
    - 混雑情報（API取得時、時間帯グラフ表示）
    - 連絡先情報（電話、ウェブサイト）
  - レビュータブ:
    - 総合評価（5段階、レビュー数）
    - 評価分布グラフ（5段階）
    - Google/外部レビュー表示
    - レビュー並べ替えオプション
  - 写真タブ:
    - グリッドレイアウトの写真表示
    - Google/外部写真+ユーザー追加写真
    - 全画面表示機能（タップで拡大）
  - アクションフッター:
    - 「Edit」ボタン（場所情報編集）
    - 「Schedule」ボタン（日時変更、既にスケジュール済みの場合は「Reschedule」）
    - 「Remove」ボタン（スケジュールから削除、赤色）

- **移動詳細モーダル**:
  - ヘッダー: 移動手段アイコンと概要
  - 出発/到着情報:
    - 出発地名、出発時間
    - 到着地名、到着時間
    - 総移動時間、総移動距離
  - 移動手段詳細:
    - 徒歩の場合: 歩行ルート、予想時間
    - 公共交通機関の場合:
      - 路線名、乗車駅、降車駅
      - 乗換情報（存在する場合）
      - 出発時刻、到着時刻
      - 料金情報（取得可能時）
    - 車/タクシーの場合:
      - ルート概要
      - 交通状況
      - 予想時間（交通状況考慮）
  - 代替移動手段:
    - 他の移動手段オプション表示
    - 所要時間、距離、概算費用の比較
    - 「Change」ボタン（移動手段変更用）
  - 地図プレビュー:
    - ミニマップでルート表示
    - 「拡大表示」ボタン（全画面マップ表示）

- **最適化ボタン**:
  - フローティング丸型ボタン（右下固定、16px パディング）
  - 最適化済み: チェックマークアイコン（緑色）
  - 未最適化: マジックワンドアイコン（スカイブルー）
  - ホバー時拡大エフェクト（1.05倍）
  - クリック時: 最適化設定モーダル表示

#### 最適化設定モーダル
- タイトル: 「ルート最適化」
- 設定項目:
  - 開始日/終了日選択（日付ピッカー）
  - 1日の開始/終了時間（時間ピッカー、デフォルト 9:00-18:00）
  - 食事時間設定:
    - 朝食: 時間帯選択（デフォルト 7:00-8:00）
    - 昼食: 時間帯選択（デフォルト 12:00-13:00）
    - 夕食: 時間帯選択（デフォルト 18:00-19:00）
  - 移動手段選択:
    - 主要移動手段（徒歩、公共交通機関、車、タクシー）
    - 短距離移動閾値（例: 「800m以下は徒歩」）
    - 長距離移動閾値（例: 「5km以上は車/電車」）
  - 最適化優先度（スライダー選択）:
    - 時間効率（移動時間最小化）
    - 距離最小化（移動距離最小化）
    - 混雑回避（混雑時間/場所を避ける）
    - 費用最小化（安価な移動手段優先）
  - 場所の訪問希望度反映レベル（スライダー）:
    - 低: 全ての場所を平等に扱う
    - 中: 希望度に応じて優先度付け
    - 高: 高希望度の場所を強く優先
  - 高度な設定（折りたたみパネル）:
    - 休憩時間の自動挿入
    - 移動時間バッファ（%)
    - 場所ごとの滞在時間調整
- 実行ボタン: 「最適化実行」（スカイブルー）
- キャンセルボタン: 「キャンセル」（グレー）
- 最適化プリセット保存機能（設定を名前付きで保存）

#### インタラクション
- マップ上のマーカータップ:
  - 情報ウィンドウ表示
  - 「詳細表示」タップで場所詳細モーダル表示
  - 「経路表示」タップで現在地からの経路表示
  - ダブルタップでズームイン
- マップ上のルートラインタップ:
  - 移動詳細情報のポップアップ表示
  - ポップアップ内の「詳細」ボタンで移動詳細モーダル表示
- リストビューの場所ボックスタップ:
  - 場所詳細モーダル表示
  - スクロール位置を記憶（モーダルを閉じると元の位置に戻る）
- リストビューの接続線/移動情報タップ:
  - 移動詳細モーダル表示
  - 移動手段の変更オプション提示
- 日付セレクタータップ:
  - 選択日付のスケジュールをアニメーション表示
  - 左右スワイプで前後の日付に移動可能
- タブ切り替え:
  - マップ/リスト間でクロスフェードアニメーション
  - 同じ日付コンテキストを維持（日付選択は同期）
- 最適化ボタンタップ:
  - 最適化設定モーダル表示
  - 設定完了後、最適化処理実行:
    - プログレスバー表示（処理中）
    - 処理段階表示（「場所を分析中...」「最適ルート計算中...」）
    - 完了後、新しいルート表示とトースト通知
    - 変更点のハイライト表示（一時的に色を変える）
- ドラッグアンドドロップ（管理者権限時）:
  - リスト内の場所ボックスを長押しでドラッグ開始
  - 上下にドラッグ可能
  - ドロップで位置確定、スケジュール再計算
  - 移動時間が自動的に更新される
- 編集モード（管理者権限時）:
  - 編集ボタンタップで編集モード切り替え
  - 場所の追加/削除/移動が可能
  - 「Save」ボタンで変更確定
  - 「Cancel」ボタンで変更破棄

### 3. マイプレイス画面 (/my-trip/my-places)
#### レイアウト
- トップ: トリップ情報、「Add Place」ボタン
- フィルターバー: カテゴリ、訪問希望度、ステータスフィルター
- メイン: 追加済み場所グリッド/リスト（切り替え可能）
- 右下: フローティング追加ボタン

#### コンポーネント
- **トリップ情報ヘッダー**:
  - トリップ名（18px、太字）
  - 「My Places」サブタイトル
  - 場所カウント（例: 「15 places」）
  - 追加/スケジュール済みカウント（例: 「10/15 scheduled」）
  - リスト同期状態インジケーター（クラウドアイコン）

- **フィルターバー**:
  - 表示切替: グリッド/リストビュー（アイコンボタン）
  - カテゴリフィルター:
    - 水平スクロール可能なアイコンボタン列
    - カテゴリーごとに異なるアイコンとラベル:
      - 観光: 🏛️ Attractions
      - 食事: 🍴 Dining
      - ショッピング: 🛍️ Shopping
      - 自然: 🌲 Nature
      - アクティビティ: 🎭 Activities
      - 宿泊: 🏨 Hotels
      - その他: ⚪ Other
    - 選択中: 背景色がカテゴリー色に変化
    - 複数選択可能（OR条件）
  - 訪問希望度フィルター:
    - スライダー（1-5）
    - 「X★以上」テキスト表示
    - スライダー位置に応じてリストが動的にフィルタリング
  - ステータスフィルター:
    - すべて/スケジュール済み/未スケジュール
    - セグメントコントロール形式
    - 各セグメントにカウント表示（例: 「未スケジュール (5)」）

- **場所カード** (グリッドビュー):
  - サイズ: 160px×180px（小画面では2列、大画面では3列以上）
  - 画像（上部、アスペクト比16:9、80px高さ）
    - 画像なしの場合はカテゴリーアイコンと背景色表示
    - 画像読み込み中はスケルトンローディング表示
  - 場所名（太字、16px、最大2行、省略時は「...」）
  - カテゴリ（小さなアイコンとテキスト、12px）
  - 訪問希望度（スター表示、1-5）
  - 滞在予定時間（時計アイコンと時間、「1.5h」形式）
  - スケジュールステータスバッジ:
    - 未スケジュール: グレー背景「Not scheduled」
    - スケジュール済み: スカイブルー背景、日付表示（「5/15」形式）
  - 操作メニュー（右上の「...」ボタン）:
    - タップでメニュー展開
    - 編集: ペンアイコン
    - 削除: ゴミ箱アイコン
    - スケジュール/スケジュール解除: カレンダーアイコン
    - 詳細表示: 情報アイコン
  - 主要カード領域: タップ時の詳細表示ヒットエリア
  - ホバー/タップ状態: 軽い影効果と境界線強調

- **場所リスト項目** (リストビュー):
  - 高さ: 72px（一貫性のあるサイズ）
  - 左: サムネイル画像（56px×56px、角丸）またはカテゴリーアイコン
  - 中央（垂直レイアウト）:
    - 場所名（太字、16px、1行、長い場合は省略）
    - 情報行: カテゴリ、訪問希望度（星）、滞在時間を横に並べて表示
    - 住所または補足情報（グレーテキスト、1行、省略可能）
  - 右:
    - スケジュールステータスバッジ（グリッドビューと同様）
    - 操作メニューボタン（「...」）
  - 区切り線: 各項目の下に薄いグレー線（1px）
  - 選択状態: タップ時に背景色が薄いグレーに変化

- **場所追加フローティングボタン**:
  - 位置: 右下固定位置（画面下から16px、右から16px）
  - 形状: 円形（56px直径）
  - 色: スカイブルー背景（#0ea5e9）
  - アイコン: 白色プラスアイコン
  - 影効果: 軽いドロップシャドウ
  - タップ時: 拡大アニメーション（1.05倍）後、追加オプションが展開:
    1. 「Search Places」: 検索アイコン、Google Places検索
    2. 「Create Custom」: ペンアイコン、カスタム場所作成
    3. 「Import from List」: インポートアイコン、リストからインポート
  - オプション表示: ボタン上に垂直展開、半透明オーバーレイ背景

#### 場所詳細モーダル
- ヘッダー: 
  - 場所画像（全幅、高さ160px、アスペクト比16:9）
  - 画像なしの場合はカテゴリー色の背景とアイコン大表示
- 閉じるボタン（右上X、白背景円形）
- コンテンツ（パディング16px）:
  - 場所名（24px、太字、複数行可）
  - カテゴリバッジ（カテゴリー色背景、アイコン+テキスト）
  - アクションボタン行:
    - Google Mapsで開く（地図アイコン）
    - 共有（共有アイコン）
    - お気に入り（ハートアイコン）
  - 情報セクション（カード形式）:
    - 住所（マップピンアイコン、コピーボタン付き）
    - 訪問希望度（大きめの星表示、タップで編集可能）
    - 滞在予定時間（時計アイコン、編集可能ドロップダウン）
    - 予算/価格帯（$, $$, $$$表示、編集可能）
    - 訪問優先タイムスロット（朝/昼/夕/指定なし、編集可能）
  - メモセクション:
    - 「Notes」見出し
    - メモテキスト（複数行表示、スクロール可能）
    - 編集ボタン（ペンアイコン）
  - 営業時間情報（API取得時）:
    - 「Opening Hours」見出し
    - 曜日別時間表示
    - 「Today」ハイライト
    - 現在の営業状況表示（「Open」「Closed」）
  - 混雑情報（API取得時）:
    - 「Popular Times」見出し
    - 時間帯別グラフ表示
    - 現在の混雑状況ハイライト
- フッターアクション:
  - 「Edit」ボタン（アウトライン、グレー）
  - 「Schedule」ボタン（スケジュール済みの場合は「Reschedule」、スカイブルー）
  - 「Delete」ボタン（アウトライン、赤色）
  - ボタン幅: 均等割り（33%）

#### インタラクション
- 場所カード/リスト項目タップ:
  - 場所詳細モーダルが下からスライドイン表示
  - 背景は半透明オーバーレイ（タップで閉じる）
- 追加ボタンタップ:
  - タップアニメーション（僅かに縮小して戻る）
  - 3つの追加オプションが上に拡張表示
  - オプション表示中の背景タップでメニュー閉じる
- 「Search Places」選択:
  - 右からスライドインで検索画面に遷移
  - キーボードが自動的に表示
- 「Create Custom」選択:
  - 右からスライドインでカスタム作成フォームに遷移
  - 場所名フィールドに自動フォーカス
- 「Import from List」選択:
  - 右からスライドインでインポートソース選択画面に遷移
  - アニメーションでインポートソースが表示
- フィルターバー操作:
  - カテゴリータップ: 選択/選択解除トグル、リアルタイムでリスト更新
  - 希望度スライダー操作: スライダー移動中も動的にリスト更新
  - ステータスフィルタータップ: セグメント切り替え、リスト更新
  - 表示切替ボタン: グリッド⇔リスト間でアニメーション遷移
- 場所カードの操作メニュー:
  - メニューボタンタップでオプション表示（上方向または下方向ポップアップ）
  - 編集: 編集フォームをスライドイン表示
  - 削除: 削除確認ダイアログ表示→確認後削除アニメーション
  - スケジュール: 日時選択カレンダーをスライドアップ表示
  - 詳細: 詳細モーダル表示（すでに表示されている場合は何もしない）
- 場所詳細モーダル内のアクション:
  - 「Edit」タップ: その場で編集モードに切り替え（フィールドが編集可能に変化）
  - 「Schedule」タップ: 日時選択カレンダーをモーダル上に表示
    - 日付選択→時間選択→確定の順に進行
    - 完了時: 成功通知、ステータスバッジ更新
  - 「Delete」タップ: 
    - 確認ダイアログ表示（「このプレイスを削除しますか？」）
    - 確認後: モーダルが閉じて削除アニメーション
    - リストから該当アイテムがフェードアウト
- ドラッグ操作（優先順位変更）:
  - リストビューで長押し開始
  - 上下にドラッグ可能
  - ドロップで優先順位が更新される
  - サーバー同期インジケーター表示

### 4. 場所追加画面 - 検索タイプ (/add-place)
#### レイアウト
- トップ: 戻るボタン、「Add Place」タイトル
- 検索バー: 場所検索入力
- 検索結果リスト: Google Places API結果
- 下部: 詳細フォーム（場所選択後表示）

#### コンポーネント
- **検索バー**:
  - 入力フィールド（「Search for a place」プレースホルダー）
  - クリアボタン（入力時のみ表示）
  - 検索アイコン
  - フォーカス時: ドロップシャドウ効果
  
- **検索結果リスト**:
  - 各結果項目:
    - 場所名（太字）
    - カテゴリ（グレーテキスト）
    - 住所（小さなテキスト）
    - 評価（星とレビュー数）
    - 距離（現在地からの距離、取得可能時）
  - ローディング状態: スケルトン表示
  - 結果なし時: 「No results found」メッセージ
  - 最大表示数: 10件（スクロール可能）

- **詳細フォーム** (場所選択後):
  - 選択場所サマリー:
    - 名前（編集可能）
    - 住所（読み取り専用）
    - カテゴリ（API取得、編集可能）
  - 訪問希望度セレクター:
    - 5つの星（タップ選択可能）
    - 標準で3★選択
  - 滞在時間セレクター:
    - 時間単位のドロップダウン（30分〜4時間）
    - 標準で1時間選択
  - カテゴリセレクター:
    - 複数選択可能なチップリスト
    - 追加用の「+」ボタン
  - 予算/価格帯:
    - $, $$, $$$ から選択
  - 優先訪問タイムスロット:
    - 「Morning」「Afternoon」「Evening」「Any time」から選択
  - メモフィールド:
    - 複数行テキストエリア
    - プレースホルダー: 「Add notes about this place...」
  - 送信ボタン:
    - 「Add to My Places」（スカイブルー背景）
    - 無効状態: 必須項目未入力時グレー表示

#### インタラクション
- 検索入力:
  - 入力中: 3文字以上でリアルタイム検索
  - キーボード表示中は結果リストが自動スクロール
- 結果タップ:
  - 項目がハイライト
  - 詳細フォームが表示（スムーズなアニメーション）
  - キーボードが自動的に閉じる
- 訪問希望度タップ:
  - タップした位置までの星が塗りつぶし
- カテゴリチップタップ:
  - 選択/選択解除の切り替え
  - 選択時: 背景色変化
- 送信ボタンタップ:
  - 送信中: ローディングスピナー表示
  - 成功時: 成功トースト、マイプレイス画面に自動遷移
  - エラー時: エラーメッセージ表示、フォーム保持

### 5. 場所追加画面 - カスタム作成 (/add-place/custom)
#### レイアウト
- 検索タイプと同様のヘッダー
- フォーム中心のレイアウト
- 地図ピン選択セクション（下部）

#### コンポーネント
- **カスタム場所フォーム**:
  - 場所名入力（必須）
  - 住所入力または地図からピン選択
  - カテゴリ選択
  - 訪問希望度、滞在時間（検索タイプと同様）
  - 画像アップロードセクション:
    - カメラ起動または画像選択ボタン
    - プレビュー表示
    - 削除ボタン
  - その他詳細情報（検索タイプと同様）

- **地図ピン選択**:
  - ミニマップ表示
  - 「Map View」ボタンタップで全画面マップ
  - ピン長押しでドラッグ可能
  - 現在位置取得ボタン
  - 座標表示（緯度、経度）

#### インタラクション
- 地図タップ:
  - ピンの位置更新
  - 可能であれば、選択位置の住所を自動取得
- 画像アップロード:
  - カメラ/ギャラリー選択ダイアログ
  - アップロード後プレビュー表示
  - サイズ圧縮処理（バックグラウンド）
- 送信プロセス:
  - 検索タイプと同様のプロセス
  - 必須項目: 場所名、住所または座標

### 6. 場所追加画面 - インポート (/add-place/import)
#### レイアウト
- インポートソース選択
- 選択後のリスト表示
- チェックボックスによる複数選択UI

#### コンポーネント
- **インポートソース選択**:
  - 「Google Saved Places」
  - 「Google Maps Lists」
  - 「External Apps」（Tripadvisor、Yelp等）
  - 各ソースにロゴアイコン表示

- **インポートリスト**:
  - チェックボックス付きリスト項目
  - 場所名、住所、評価情報
  - 「Select All」トグルボタン
  - 選択済み項目カウンター（例: 「5/20 selected」）

- **インポート設定**:
  - 一括訪問希望度設定（すべてに適用）
  - 一括滞在時間設定（すべてに適用）
  - カテゴリマッピング設定（オプション）

#### インタラクション
- ソース選択:
  - 認証フロー（必要な場合）
  - データ取得中ローディング表示
- リスト項目チェック:
  - 個別選択/選択解除
  - 「Select All」で一括選択/解除
- インポート実行:
  - プログレスバー表示（大量データ時）
  - 完了時: 成功メッセージと追加件数
  - マイプレイス画面に自動遷移

## レスポンシブ対応

### モバイル (320px - 639px)
- 単一カラムレイアウト
- ボトムナビゲーション
- コンパクトカード
- 全幅モーダル

### タブレット (640px - 1023px)
- 2カラムレイアウト（必要に応じて）
- サイドナビゲーション（オプション）
- 中サイズカード
- 中サイズモーダル

### デスクトップ (1024px以上)
- マルチカラムレイアウト
- 常時表示サイドナビゲーション
- 広めのカード
- 中央配置モーダル

## アクセシビリティ

### キーボードナビゲーション
- タブインデックス順序の最適化
- フォーカス表示の明確化
- ショートカットキーの実装

### スクリーンリーダー対応
- 適切なARIA属性
- 代替テキスト
- セマンティックHTML

### カラーコントラスト
- WCAG AAレベル準拠のコントラスト比
- テキストは背景と十分なコントラスト
- フォーカス状態の明確な視覚表示

### その他
- 動的コンテンツ変更時の通知
- エラーメッセージの明確な表示
- フォームラベルの適切な関連付け

### 7. チャット画面 (/my-trip/chat)
#### レイアウト
- トップ: トリップ情報ヘッダー（簡易表示）
- メイン: スクロール可能なメッセージリスト領域
- 下部: メッセージ入力エリア（固定配置）

#### コンポーネント
- **トリップヘッダー**:
  - トリップ名
  - メンバー数アイコンとカウント
  - オンラインメンバーインジケーター（緑点）

- **メッセージリスト**:
  - スクロール領域（自動スクロール機能）
  - メッセージグループ化:
    - 同一ユーザーの連続メッセージはグループ化
    - 時間差1分以上で新規グループ
  - 日付区切り表示（新しい日付の開始時）
  - 新着メッセージ通知（未読スクロール位置）
  - ローディングインジケーター（過去メッセージ読み込み時）

- **メッセージバブル**:
  - 左配置:
    - 他ユーザーメッセージ
    - ユーザーアバター（イニシャル、色分け）
    - ユーザー名（太字）
    - メッセージテキスト（吹き出し形状）
    - タイムスタンプ（小さめグレーテキスト）
    - 「X分前」形式（24時間以内）または時刻表示
  - 右配置:
    - 自分のメッセージ
    - アバターなし
    - 名前なし
    - スカイブルー背景の吹き出し
    - タイムスタンプ
  - メッセージステータス:
    - 送信中: グレーチェックマーク
    - 送信済み: 青チェックマーク
    - 既読: 青ダブルチェックマーク
  
- **場所共有メッセージ**:
  - 特殊カード形式表示
  - サムネイル画像
  - 場所名、簡易情報
  - 「View Place」ボタン
  - タップで場所詳細表示

- **スケジュール共有メッセージ**:
  - 特殊カード形式表示
  - 日付、時間範囲
  - イベント名
  - 「View in Schedule」ボタン
  - タップでスケジュール画面の該当箇所に遷移

- **入力エリア**:
  - テキスト入力フィールド（複数行対応、自動拡張）
  - プレースホルダー: 「メッセージを入力...」
  - 送信ボタン（紙飛行機アイコン）
  - 添付ボタン（クリップアイコン）:
    - タップで展開メニュー:
      - 「Share Place」
      - 「Share Schedule」
      - 「Send Photo」
  - 絵文字ボタン（スマイルアイコン）

- **空の状態表示**:
  - メッセージがない場合のみ表示
  - センター配置のイラスト
  - 「メッセージがありません。会話を始めましょう！」テキスト

#### インタラクション
- メッセージ入力:
  - マルチライン入力（Shift+Enterで改行）
  - 入力中インジケーター表示（「ユーザーが入力中...」）
  - 自動フォーカス（画面表示時）
- 送信アクション:
  - 送信ボタンタップ
  - Enterキー押下（モバイルは送信、デスクトップも送信）
  - 送信後の自動スクロールダウン
- 添付メニュー:
  - 「Share Place」: マイプレイスリスト表示→選択→共有
  - 「Share Schedule」: 日付選択→共有
  - 「Send Photo」: カメラ/ギャラリー選択→送信
- スクロール操作:
  - 下端で引っ張り更新（新着メッセージ確認）
  - 上端で過去メッセージ読み込み
  - 長時間の会話はページング読み込み
- 通知:
  - 新着メッセージでサウンド再生（設定可）
  - アプリがバックグラウンド時はプッシュ通知
  - 未読カウントバッジ表示（タブアイコン上）

### 8. 共有画面 (/my-trip/share)
#### レイアウト
- トップ: トリップ情報ヘッダー
- 上部: 参加コードセクション
- 中部: 共有オプションセクション
- 下部: メンバーリスト

#### コンポーネント
- **参加コードカード**:
  - タイトル: 「Trip Join Code」
  - コード表示（大きなモノスペースフォント、文字間隔広め）
  - 例: 「ABC-123-XYZ」形式
  - コピーボタン（クリップボードアイコン）
  - QRコード表示（タップで拡大）
  - 有効期限表示（例: 「7日間有効」）
  - 新規コード生成ボタン（更新アイコン）

- **共有オプションセクション**:
  - 「Share Trip」見出し
  - 共有方法カード:
    - 各種SNSアイコン（直接共有用）
    - メール共有ボタン（封筒アイコン）
    - メッセージ共有ボタン（チャットアイコン）
    - リンク共有ボタン（リンクアイコン）
  - 共有メッセージプレビュー:
    - カスタマイズ可能テキストエリア
    - デフォルトメッセージ（例: 「Join my trip to Tokyo! Use code: ABC-123-XYZ」）
  - 公開設定トグル:
    - 「コードを知っている人のみ参加可能」（デフォルト）
    - 「リンクを持つ全員が参加可能」
    - 各設定の簡易説明文

- **メンバーリストセクション**:
  - 「Members」見出しとカウント（例: 「5 members」）
  - メンバー管理ボタン（管理者のみ表示）
  - メンバーリスト項目:
    - ユーザーアバター（イニシャル、色分け）
    - 名前
    - 役割バッジ（「オーナー」「メンバー」など）
    - オンラインステータス（緑点）
    - 参加日表示（例: 「5日前に参加」）
    - 操作メニュー（...ボタン、管理者のみ）:
      - 権限変更
      - 削除
  - 「メンバーを招待」ボタン（リスト下部）

- **権限設定モーダル** (管理者のみ):
  - トリップ権限マトリクス:
    - 閲覧のみ（最小権限）
    - 場所の追加/編集
    - スケジュール編集
    - メンバー招待
    - 設定変更（最大権限）
  - メンバーごとの権限設定セレクター
  - 保存/キャンセルボタン

#### インタラクション
- コピーボタンタップ:
  - コードをクリップボードにコピー
  - 「コピーしました」トースト表示
- QRコードタップ:
  - 拡大表示モーダル
  - 「保存」オプション
  - 「共有」オプション
- 共有ボタンタップ:
  - OS標準の共有シートを表示
  - 選択したアプリに共有テキストと参加リンク送信
- リンク共有:
  - リンクをクリップボードにコピー
  - 「リンクをコピーしました」トースト表示
- 新規コード生成:
  - 確認ダイアログ表示（古いコードは無効になる警告）
  - 確認後、新コード生成とアニメーション表示
- メンバー操作メニュー:
  - 権限変更: 権限設定モーダル表示
  - 削除: 確認ダイアログ表示→削除実行
- 「メンバーを招待」ボタン:
  - 招待方法選択モーダル表示:
    - コードコピー
    - 直接共有
    - メールアドレス入力

### 9. プロフィール画面 (/profile)
#### レイアウト
- トップ: ヘッダー（「Profile」タイトル）
- メイン: 垂直スクロールのフォームレイアウト
- 下部: 保存ボタン（スクロール位置に関わらず固定表示）

#### コンポーネント
- **プロフィールヘッダー**:
  - ユーザーアバター（大サイズ、編集可能）
  - カメラアイコンオーバーレイ（タップで編集）
  - ユーザー名（大きめフォント）
  - アカウントタイプ表示（「ゲスト」または「登録ユーザー」）

- **プロフィールフォーム**:
  - セクション区切りのカード形式
  - **基本情報セクション**:
    - 名前入力（フルネーム）
    - 表示名入力（アプリ内表示用）
    - アバター設定:
      - イニシャル入力（1-2文字）
      - カラーピッカー（プリセットカラー選択）
      - プレビュー表示
  - **アカウント設定セクション**:
    - メールアドレス入力（オプション）
    - パスワード設定（ゲストアカウント登録用）
    - アカウントタイプアップグレードボタン
  - **表示設定セクション**:
    - テーマ設定:
      - ライト/ダーク/システムから選択
      - ラジオボタンまたはセグメントコントロール
      - 選択時即時適用
    - 言語設定:
      - ドロップダウン選択
      - 現在は「English」のみ選択可能
  - **通知設定セクション**:
    - プッシュ通知マスタートグル
    - 個別通知設定:
      - 新規メッセージ
      - トリップ更新
      - スケジュール変更
      - 新規メンバー参加
    - 通知音選択（ドロップダウン）
  - **プライバシー設定セクション**:
    - 位置情報共有設定
    - オンラインステータス表示設定
    - データ使用設定
  - **データと保存セクション**:
    - キャッシュクリアボタン
    - オフラインデータ設定
    - データ使用量表示

- **アカウント管理セクション**:
  - データエクスポートボタン
  - アカウント削除ボタン（赤色警告）
  - ログアウトボタン（ゲストの場合は表示なし）

- **フローティング保存ボタン**:
  - スクロール位置に関わらず下部に固定表示
  - 変更がある場合のみ有効化
  - スカイブルー背景、白テキスト
  - 保存中はローディングスピナー表示

#### インタラクション
- アバター編集:
  - タップでモーダル表示:
    - イニシャル入力
    - カラー選択
    - プレビュー
  - 保存/キャンセルボタン
- テーマ切り替え:
  - 選択時即時適用（プレビュー効果）
  - システム設定に連動する場合は通知
- 通知設定トグル:
  - マスタートグルで全通知の一括オン/オフ
  - 個別トグルで詳細設定
  - 権限未許可時はOS設定へのリンク表示
- 保存ボタン:
  - タップで全設定を一括保存
  - 成功時: 「設定を保存しました」トースト表示
  - エラー時: エラーメッセージと再試行オプション
- アカウント削除:
  - 警告ダイアログ（複数確認ステップ）
  - 最終確認で「DELETE」とテキスト入力要求
  - 完了後はホーム画面にリダイレクト

### 10. カレンダー/タイムライン画面 (/my-trip/calendar)
#### レイアウト
- トップ: 日付セレクターとビュー切り替え
- メイン: 選択されたビュー表示（カレンダー/タイムライン）
- 下部: コントロールバー（最適化ボタンなど）

#### コンポーネント
- **ビュー切り替えセグメント**:
  - 「Calendar」「Timeline」「List」の3つのビュー
  - アクティブビューはハイライト表示
  - 各ビューに対応するアイコン

- **カレンダービュー**:
  - 月表示（デフォルト）:
    - 月名と年表示（上部）
    - 曜日ヘッダー（短縮表示）
    - グリッドセル（日付ごと）
    - 旅行期間のセルはハイライト
    - 各セル内に予定アイテム表示（最大3つ）
    - 「+X more」表示（オーバーフロー時）
  - 週表示:
    - 横スクロール時間軸
    - 縦方向に日付区切り
    - イベントブロックの時間表示
  - 日表示:
    - 単一日の詳細タイムライン
    - 時間区切り表示（1時間ごと）
    - イベントブロック（開始-終了時間で可変高さ）
    - 現在時刻インジケーター（赤線）

- **タイムラインビュー**:
  - 垂直タイムライン表示
  - 左側: 時間軸（1時間ごと目盛り）
  - 右側: 場所/イベントカード
  - 場所間の接続線:
    - 点線または実線（移動手段により変化）
    - 移動手段アイコン表示
    - 移動時間テキスト
    - 移動距離表示
  - 場所/イベントカード:
    - 場所名
    - 時間範囲
    - カテゴリアイコン
    - サムネイル画像（存在する場合）
    - 訪問希望度表示
  - 特別イベント表示:
    - 食事アイコン（🍽️）と時間
    - 休憩アイコン（☕）と時間
    - ホテル出発/到着アイコン（🏨）と時間

- **リストビュー**:
  - 日付ごとのセクション区切り
  - 各セクションの日付ヘッダー（曜日表示）
  - イベントリスト:
    - 時間表示（左）
    - イベント名と詳細（右）
    - カテゴリアイコン
    - 移動情報（前のイベントとの間）

- **日付セレクター**:
  - 水平スクロール可能な日付チップ
  - 現在日付は強調表示
  - 旅行期間外の日付はグレーアウト
  - 月/週切り替えボタン

- **コントロールバー**:
  - 最適化ボタン（地図アイコン+魔法の杖）
  - フィルターボタン（表示内容制限用）
  - 表示密度切り替え（コンパクト/標準/詳細）
  - 共有ボタン（カレンダーエクスポート用）

#### インタラクション
- ビュー切り替え:
  - セグメントタップでビュー変更
  - アニメーションでスムーズ遷移
- カレンダー操作:
  - 日付セルタップ: 日表示に切り替え
  - スワイプ: 月/週の前後移動
  - ピンチ: ズームイン/アウト（週/月表示切替）
- タイムライン操作:
  - スクロール: 時間軸移動
  - イベントカードタップ: 詳細表示
  - 移動線タップ: 移動詳細表示
- ドラッグ操作（編集モード時）:
  - イベントカード長押し: 移動開始
  - 新しい時間位置にドロップ: スケジュール変更
  - 時間調整ハンドル: イベント長さ変更
- 最適化ボタン:
  - タップで最適化設定モーダル表示
  - 最適化実行後、新しいスケジュール表示

### 11. 経路詳細/ナビゲーション画面 (/my-trip/navigation)
#### レイアウト
- 全画面マップ（上部2/3）
- 下部シート（引き上げ可能、1/3→全画面）
- ナビゲーションコントロール（右上）

#### コンポーネント
- **ナビゲーションマップ**:
  - Google Maps全画面表示
  - 現在位置表示（青点）
  - 目的地マーカー（ピンアイコン）
  - ルートライン:
    - 移動手段により色分け
    - 徒歩: 点線
    - 公共交通機関: 実線（色分け）
    - 車/タクシー: 実線（青）
  - 周辺施設アイコン:
    - レストラン、カフェ、ATM等
    - タップで簡易情報表示
  - 3Dビルディング表示（都市部）
  - コンパス方位表示（右上）
  - ズームコントロール（右側）

- **下部情報シート**:
  - ハンドル（上部中央線）
  - 目的地情報:
    - 場所名（大きめフォント）
    - 住所
    - 推定到着時間
    - 残り時間/距離
  - ナビ指示リスト:
    - ステップごとのカード
    - 方向アイコン（右折、左折など）
    - 距離表示
    - 経路名/道路名
    - 予想所要時間
  - 代替ルートタブ:
    - 複数経路の比較表示
    - 所要時間と距離
    - 交通状況表示（色分け）
  - 共有ボタン:
    - 現在位置共有機能
    - 目的地共有機能
  - 施設情報タブ:
    - 目的地の詳細情報
    - 営業時間
    - 連絡先
    - ウェブサイト
    - 評価、レビュー

- **ナビゲーションコントロール**:
  - 開始/停止ボタン（大きな青ボタン）
  - 音声ガイダンス切替（スピーカーアイコン）
  - 表示モード切替:
    - 2D固定北
    - 2D進行方向固定
    - 3D視点
  - 現在地ボタン（ターゲットアイコン）
  - 設定ボタン（歯車アイコン）:
    - ルート設定
    - 表示設定
    - 音声設定

#### インタラクション
- マップ操作:
  - ドラッグ: マップ移動
  - ピンチ: ズームイン/アウト
  - ダブルタップ: ズームイン
  - 二本指タップ: ズームアウト
  - 二本指回転: 地図回転
- 下部シート操作:
  - 上スワイプ: 全画面表示
  - 下スワイプ: 最小化
  - タブ切り替え: 情報カテゴリ切り替え
- ナビ開始:
  - 開始ボタンタップ: ターンバイターンナビ開始
  - 音声ガイダンス開始
  - 進行方向追従モードに自動切替
- 代替ルート:
  - タップで選択: ルート再計算
  - スワイプで比較表示
- 共有機能:
  - 位置共有: リアルタイム位置共有開始
  - 目的地共有: 目的地情報送信
  - シェア方法選択（メッセージ、メール等）
